const openForm=document.querySelector(".button-contacts"),modal=document.querySelector(".modal"),modalClose=modal.querySelector(".modal-close"),modalForm=modal.querySelector(".reply-form"),modalName=modal.querySelector(".reply-name"),modalEmail=modal.querySelector(".reply-email"),modalMessage=modal.querySelector("textarea[name=message]");let storageName="",storageEmail="",isStorageSupport=!0,validName=!1,validEmail=!1;try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(a){isStorageSupport=!1}openForm.addEventListener("click",function(a){a.preventDefault(),modal.classList.add("modal-show"),storageName?(modalName.value=storageName,modalEmail.focus(),validName=!0):modalName.focus(),storageEmail&&(modalEmail.value=storageEmail,validEmail=!0),validEmail&&validName&&modalMessage.focus()}),modalClose.addEventListener("click",function(a){a.preventDefault(),modal.classList.remove("modal-show"),modalName.classList.remove("reply-error"),modalEmail.classList.remove("reply-error")}),modalForm.addEventListener("submit",function(a){modalEmail.value||modalName.value?modalName.value?modalEmail.value?isStorageSupport&&(localStorage.setItem("name",modalName.value),localStorage.setItem("email",modalEmail.value)):(modalEmail.classList.add("reply-error"),modalName.classList.remove("reply-error"),modalEmail.focus(),a.preventDefault()):(modalName.classList.add("reply-error"),modalEmail.classList.remove("reply-error"),modalName.focus(),a.preventDefault()):(modalName.classList.add("reply-error"),modalEmail.classList.add("reply-error"),modalName.focus(),a.preventDefault())}),window.addEventListener("keydown",function(a){"Escape"===a.code&&modal.classList.contains("modal-show")&&(a.preventDefault(),modal.classList.remove("modal-show"),modalName.classList.remove("reply-error"),modalEmail.classList.remove("reply-error"))});
